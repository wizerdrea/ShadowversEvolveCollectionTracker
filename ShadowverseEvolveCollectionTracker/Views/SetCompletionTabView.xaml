<UserControl x:Class="ShadowverseEvolveCardTracker.Views.SetCompletionTabView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:conv="clr-namespace:ShadowverseEvolveCardTracker.Converters"
             Background="{DynamicResource PrimaryBrush}">
    <UserControl.Resources>
        <conv:PercentageToGoldBrushConverter x:Key="PercentToGoldConverter" />
    </UserControl.Resources>

    <Grid Margin="8">
        <DataGrid ItemsSource="{Binding SetsView}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  CanUserAddRows="False"
                  Background="{DynamicResource PrimaryBrush}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Set Name" Binding="{Binding SetName}" Width="2*" />

                <!-- 1 Card Set % as templated cell so we can overlay gradient + glow animation -->
                <DataGridTemplateColumn Header="1 Card Set %" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Grid>
                                <Border x:Name="HighlightBorder"
                                        CornerRadius="4"
                                        Padding="4,2"
                                        Background="{Binding OneCardPercent, Converter={StaticResource PercentToGoldConverter}}"
                                        BorderBrush="Transparent"
                                        BorderThickness="1">


                                    <TextBlock Text="{Binding OneCardPercent, StringFormat={}{0}%}"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               FontWeight="SemiBold"
                                               Foreground="{DynamicResource TextPrimaryBrush}" />
                                </Border>
                            </Grid>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- Playset % templated similarly -->
                <DataGridTemplateColumn Header="Playset %" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Grid>
                                <Border x:Name="PlaysetBorder"
                                        CornerRadius="4"
                                        Padding="4,2"
                                        Background="{Binding PlaysetPercent, Converter={StaticResource PercentToGoldConverter}}"
                                        BorderBrush="Transparent"
                                        BorderThickness="1">

                                    <TextBlock Text="{Binding PlaysetPercent, StringFormat={}{0}%}"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               FontWeight="SemiBold"
                                               Foreground="{DynamicResource TextPrimaryBrush}" />
                                </Border>
                            </Grid>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- Unique 1 Card Set % templated similarly -->
                <DataGridTemplateColumn Header="Unique 1 Card Set %" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Grid>
                                <Border x:Name="PlaysetBorder"
                        CornerRadius="4"
                        Padding="4,2"
                        Background="{Binding UniqueOneCardPercent, Converter={StaticResource PercentToGoldConverter}}"
                        BorderBrush="Transparent"
                        BorderThickness="1">

                                    <TextBlock Text="{Binding UniqueOneCardPercent, StringFormat={}{0}%}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextPrimaryBrush}" />
                                </Border>
                            </Grid>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- Unique Playset % templated similarly -->
                <DataGridTemplateColumn Header="Unique Playset % " Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Grid>
                                <Border x:Name="PlaysetBorder"
                         CornerRadius="4"
                         Padding="4,2"
                         Background="{Binding UniquePlaysetPercent, Converter={StaticResource PercentToGoldConverter}}"
                         BorderBrush="Transparent"
                         BorderThickness="1">

                                    <TextBlock Text="{Binding UniquePlaysetPercent, StringFormat={}{0}%}"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontWeight="SemiBold"
                                Foreground="{DynamicResource TextPrimaryBrush}" />
                                </Border>
                            </Grid>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>

            <DataGrid.Style>
                <Style TargetType="DataGrid">
                    <Setter Property="RowHeight" Value="28"/>
                </Style>
            </DataGrid.Style>
        </DataGrid>

        <TextBlock Text="No set data available. Load cards to populate set completion."
                   Foreground="{DynamicResource TextSecondaryBrush}"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   TextWrapping="Wrap"
                   TextAlignment="Center"
                   Width="380">
            <TextBlock.Style>
                <Style TargetType="TextBlock">
                    <Setter Property="Visibility" Value="Collapsed"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding SetsView.IsEmpty}" Value="True">
                            <Setter Property="Visibility" Value="Visible"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock>
    </Grid>
</UserControl>